# # handlers/register_handler.py
# from utils.db_manager import register_user, get_user_language
# from telebot import types
# import traceback


# def register_registration_handler(bot):
#     @bot.message_handler(func=lambda message: True)
#     def register(message):
#         chat_id = message.chat.id
#         lang = get_user_language(chat_id)

#         try:
#             name_age = message.text.split(",")
#             name = name_age[0].strip()
#             age = int(name_age[1].strip().split()[0])

#             register_user(chat_id, name, age)

#             if lang == "kk":
#                 text = (
#                     "‚úÖ –†–∞—Ö–º–µ—Ç! –°—ñ–∑ —Ç—ñ—Ä–∫–µ–ª–¥—ñ“£—ñ–∑.\n"
#                     "–ï–Ω–¥—ñ –æ–π—ã–Ω –µ—Ä–µ–∂–µ–ª–µ—Ä—ñ–º–µ–Ω —Ç–∞–Ω—ã—Å –±–æ–ª—ã“£—ã–∑:\n"
#                     "1. –ë–æ—Ç —Å—ñ–∑–≥–µ —Ç–∞–ø—Å—ã—Ä–º–∞–ª–∞—Ä –±–µ—Ä–µ–¥—ñ.\n"
#                     "2. ”ò—Ä —Ç–∞–ø—Å—ã—Ä–º–∞–¥–∞ “õ–∞–ª–∞–¥–∞“ì—ã –º”ô–¥–µ–Ω–∏ –Ω–µ–º–µ—Å–µ —Ç–∞—Ä–∏—Ö–∏ –Ω—ã—Å–∞–Ω“ì–∞ –±–∞—Ä—É –∫–µ—Ä–µ–∫.\n"
#                     "3. –°—ñ–∑–≥–µ —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä—É –Ω–µ–º–µ—Å–µ —Ñ–æ—Ç–æ/–∫—Ä–µ–∞—Ç–∏–≤—Ç—ñ —Ç–∞–ø—Å—ã—Ä–º–∞ –æ—Ä—ã–Ω–¥–∞—É “±—Å—ã–Ω—ã–ª–∞–¥—ã.\n"
#                     "4. –ë–∞—Ä–ª—ã“õ –∫–µ–∑–µ“£–¥–µ—Ä–¥—ñ –∞—è“õ—Ç–∞“ì–∞–Ω —Å–æ“£, ¬´–æ–π—ã–Ω–¥—ã –∞—è“õ—Ç–∞—É—à—ã¬ª –º”ô—Ä—Ç–µ–±–µ—Å—ñ–Ω –∞–ª–∞—Å—ã–∑.\n\n"
#                     "üöÄ –î–∞–π—ã–Ω –±–æ–ª—Å–∞“£—ã–∑, –±–∞—Å—Ç–∞–π–º—ã–∑!"
#                 )
#                 markup = types.InlineKeyboardMarkup()
#                 markup.add(types.InlineKeyboardButton("–û–π—ã–Ω–¥—ã –±–∞—Å—Ç–∞—É", callback_data="start_quest"))
#             else:
#                 text = (
#                     "‚úÖ –°–ø–∞—Å–∏–±–æ! –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å.\n"
#                     "–¢–µ–ø–µ—Ä—å –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏–≥—Ä—ã:\n"
#                     "1. –ë–æ—Ç –±—É–¥–µ—Ç –¥–∞–≤–∞—Ç—å –≤–∞–º –∑–∞–¥–∞–Ω–∏—è.\n"
#                     "2. –ö–∞–∂–¥–æ–µ –∑–∞–¥–∞–Ω–∏–µ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ—Å–µ—â–µ–Ω–∏–µ–º –∫—É–ª—å—Ç—É—Ä–Ω–æ–≥–æ –∏–ª–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≥–æ—Ä–æ–¥–∞.\n"
#                     "3. –í–∞–º –Ω—É–∂–Ω–æ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫—Ä–µ–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (—Ñ–æ—Ç–æ, —Ç–µ–∫—Å—Ç).\n"
#                     "4. –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ —Å—Ç–∞—Ç—É—Å ¬´–∑–∞–≤–µ—Ä—à–∏–ª –∏–≥—Ä—É¬ª.\n\n"
#                     "üöÄ –ï—Å–ª–∏ –≤—ã –≥–æ—Ç–æ–≤—ã ‚Äì –Ω–∞—á–Ω–µ–º!"
#                 )
#                 markup = types.InlineKeyboardMarkup()
#                 markup.add(types.InlineKeyboardButton("–ù–∞—á–∞—Ç—å –∏–≥—Ä—É", callback_data="start_quest"))

#             try:
#                 bot.send_message(chat_id, text, reply_markup=markup)
#             except Exception as e:
#                 print("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è (register_handler):", e)
#                 traceback.print_exc()

#         except Exception as e:
#             try:
#                 if lang == "kk":
#                     bot.send_message(chat_id, "‚ùå “ö–∞—Ç–µ! –ê—Ç—ã“£—ã–∑–¥—ã –∂”ô–Ω–µ –∂–∞—Å—ã“£—ã–∑–¥—ã –¥“±—Ä—ã—Å —Ñ–æ—Ä–º–∞—Ç—Ç–∞ –µ–Ω–≥—ñ–∑—ñ“£—ñ–∑: –ê–π–≥–µ—Ä—ñ–º, 20 –∂–∞—Å")
#                 else:
#                     bot.send_message(chat_id, "‚ùå –û—à–∏–±–∫–∞! –í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –≤–æ–∑—Ä–∞—Å—Ç –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ: –ê–π–≥–µ—Ä—ñ–º, 22 –≥–æ–¥–∞")
#             except Exception as send_error:
#                 print("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–µ:", send_error)
#                 traceback.print_exc()

#             print("‚ùå –û—à–∏–±–∫–∞ –≤ register_handler (—Ä–∞–∑–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö):", e)
#             traceback.print_exc()
